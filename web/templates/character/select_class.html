{% extends "base.html" %}

{% block content %}
<div class="character-creation">
    <div class="breadcrumb">
        <span class="completed">Race: {{ race }}</span>
        <span class="separator">></span>
        <span class="current">Class</span>
    </div>

    <h1>Choose Your Class</h1>
    <p class="subtitle">Your class determines your combat abilities, skills, and playstyle.</p>

    <form action="/character/class" method="post" id="class-form">
        <input type="hidden" name="class_name" id="selected-value" value="">

        <div class="selection-grid">
            {% for cls in classes %}
            <div class="selection-card" data-value="{{ cls.name }}">
                <h3>{{ cls.name }}</h3>
                <div class="class-stats">
                    <div class="stat-row">
                        <span class="label">Hit Die:</span>
                        <span class="value">d{{ cls.hit_die }}</span>
                    </div>
                    <div class="stat-row">
                        <span class="label">Primary:</span>
                        <span class="value">{{ cls.primary_ability }}</span>
                    </div>
                    <div class="stat-row">
                        <span class="label">Saves:</span>
                        <span class="value small">{{ cls.saving_throws }}</span>
                    </div>
                    <div class="stat-row">
                        <span class="label">Skills:</span>
                        <span class="value">Choose {{ cls.num_skills }}</span>
                    </div>
                    <div class="stat-row">
                        <span class="label">Armor:</span>
                        <span class="value small">{{ cls.armor }}</span>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>

        <div class="actions mt-3">
            <a href="/character/new" class="btn btn-secondary">Back</a>
            <button type="submit" class="btn btn-primary" id="continue-btn" disabled>Continue</button>
        </div>
    </form>
</div>

<style>
.character-creation {
    max-width: 1000px;
    margin: 0 auto;
}

.breadcrumb {
    margin-bottom: 1.5rem;
    color: var(--text-muted);
}

.breadcrumb .completed {
    color: var(--success);
}

.breadcrumb .separator {
    margin: 0 0.5rem;
}

.breadcrumb .current {
    color: var(--secondary-color);
    font-weight: bold;
}

.subtitle {
    color: var(--text-muted);
    margin-bottom: 2rem;
}

.class-stats {
    margin-top: 0.75rem;
}

.stat-row {
    display: flex;
    justify-content: space-between;
    padding: 0.25rem 0;
    font-size: 0.85rem;
    border-bottom: 1px solid var(--bg-dark);
}

.stat-row:last-child {
    border-bottom: none;
}

.stat-row .label {
    color: var(--text-muted);
}

.stat-row .value {
    color: var(--text-light);
}

.stat-row .value.small {
    font-size: 0.75rem;
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const cards = document.querySelectorAll('.selection-card');
    const input = document.getElementById('selected-value');
    const btn = document.getElementById('continue-btn');

    cards.forEach(card => {
        card.addEventListener('click', function() {
            cards.forEach(c => c.classList.remove('selected'));
            this.classList.add('selected');
            input.value = this.dataset.value;
            btn.disabled = false;
        });
    });
});
</script>
{% endblock %}
