{% extends "base.html" %}

{% block content %}
<div class="character-creation">
    <h1>Choose Your Race</h1>
    <p class="subtitle">Your race determines your starting ability bonuses and traits.</p>

    <form action="/character/race" method="post" id="race-form">
        <input type="hidden" name="race" id="selected-value" value="">

        <div class="selection-grid">
            {% for race in races %}
            <div class="selection-card" data-value="{{ race.name }}">
                <h3>{{ race.name }}</h3>
                <p class="bonus">{{ race.bonus_display }}</p>
                <div class="race-bonuses">
                    {% if race.bonuses.strength_bonus > 0 %}
                    <span class="stat">STR +{{ race.bonuses.strength_bonus }}</span>
                    {% endif %}
                    {% if race.bonuses.dexterity_bonus > 0 %}
                    <span class="stat">DEX +{{ race.bonuses.dexterity_bonus }}</span>
                    {% endif %}
                    {% if race.bonuses.constitution_bonus > 0 %}
                    <span class="stat">CON +{{ race.bonuses.constitution_bonus }}</span>
                    {% endif %}
                    {% if race.bonuses.intelligence_bonus > 0 %}
                    <span class="stat">INT +{{ race.bonuses.intelligence_bonus }}</span>
                    {% endif %}
                    {% if race.bonuses.wisdom_bonus > 0 %}
                    <span class="stat">WIS +{{ race.bonuses.wisdom_bonus }}</span>
                    {% endif %}
                    {% if race.bonuses.charisma_bonus > 0 %}
                    <span class="stat">CHA +{{ race.bonuses.charisma_bonus }}</span>
                    {% endif %}
                </div>
            </div>
            {% endfor %}
        </div>

        <div class="actions mt-3">
            <a href="/" class="btn btn-secondary">Back</a>
            <button type="submit" class="btn btn-primary" id="continue-btn" disabled>Continue</button>
        </div>
    </form>
</div>

<style>
.character-creation {
    max-width: 900px;
    margin: 0 auto;
}

.subtitle {
    color: var(--text-muted);
    margin-bottom: 2rem;
}

.race-bonuses {
    margin-top: 0.5rem;
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
}

.race-bonuses .stat {
    background: var(--bg-dark);
    padding: 0.25rem 0.5rem;
    border-radius: 4px;
    font-size: 0.8rem;
    color: var(--success);
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const cards = document.querySelectorAll('.selection-card');
    const input = document.getElementById('selected-value');
    const btn = document.getElementById('continue-btn');

    cards.forEach(card => {
        card.addEventListener('click', function() {
            cards.forEach(c => c.classList.remove('selected'));
            this.classList.add('selected');
            input.value = this.dataset.value;
            btn.disabled = false;
        });
    });
});
</script>
{% endblock %}
